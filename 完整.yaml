mixed-port: 8092
allow-lan: false
bind-address: "*"
mode: rule
log-level: info
ipv6: true
external-controller: 0.0.0.0:9090
dns:

  enable: true
  listen: 0.0.0.0:7874
  ipv6: true
  default-nameserver:
  - 202.96.182.86
  - 202.96.134.33
  enhanced-mode: fake-ip
  fake-ip-filter:
  - "+.lan"
  - "+.stun.*.*"
  - "+.stun.*.*.*"
  - "+.stun.*.*.*.*"
  - "+.stun.*.*.*.*.*"
  - lens.l.google.com
  - "*.n.n.srv.nintendo.net"
  - "+.stun.playstation.net"
  - xbox.*.*.microsoft.com
  - "*.*.xboxlive.com"
  - "*.msftncsi.com"
  - "*.msftconnecttest.com"
  - "*.mcdn.bilivideo.cn"

p:
  type: http
  interval: 600
  health-check: &1
    enable: true
    lazy: true
    url: https://cp.cloudflare.com/generate_204
    interval: 600

proxies:
u:
  type: select
  use: &9
  - P2
  
k:
  type: select
  use: &2
  - P1

proxy-providers:

  P1:
    type: http
    interval: 43200
    health-check: *1
    url: è®¢é˜…é“¾æ¥
    path: "./proxy_providers/P1.yaml"

  P2:
    type: http
    interval: 43200
    health-check: *1
    url: è®¢é˜…é“¾æ¥
    path: "./proxy_providers/P2.yaml"


proxy-groups:

- name: åœ°åŒºé€‰æ‹©
  type: select
  proxies: 
  - é¦™æ¸¯
  - æ—¥æœ¬
  - æ–°åŠ å¡
  - ç¾å›½
  - æ‰‹åŠ¨
  - DIRECT

- name: æ‰‹åŠ¨
  type: select
  use: *9
  
- name: é¦™æ¸¯
  type: url-test
  interval: 600
  lazy: true
  use: *2
  filter: "^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"

- name: æ—¥æœ¬
  type: url-test
  interval: 600
  lazy: true
  use: *2
  filter: "^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"

- name: æ–°åŠ å¡
  type: url-test
  interval: 600
  lazy: true
  use: *2
  filter: "^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"

- name: ç¾å›½
  type: url-test
  interval: 600
  lazy: true
  use: *2
  filter: "^(?=.*((?i)\U0001F1FA\U0001F1F8|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\\b(US|UnitedStates)\\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\\b(GAME)\\b))).*$"

rule-providers:

  Spotify:
    type: http
    behavior: domain
    interval: 43200
    url: https://rules.kr328.app/spotify.yaml
    path: "./rule_provider/Spotify.yaml"

  ChinaIP:
    type: http
    behavior: classical
    interval: 43200
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaIPs/ChinaIPs_Classical.yaml
    path: "./rule_provider/ChinaIP.yaml"

  Telegram:
    type: http
    behavior: classical
    interval: 43200
    url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    path: "./rule_provider/Telegram.yaml"

  China:
    type: http
    behavior: classical
    interval: 43200
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml
    path: "./rule_provider/China.yaml"

  Bilibili:
    type: http
    behavior: classical
    interval: 43200
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml
    path: "./rule_provider/Bilibili.yaml"

  Lan:
    type: http
    behavior: classical
    interval: 43200
    url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
    path: "./rule_provider/Lan.yaml"

rules:
- RULE-SET,Lan,DIRECT
- RULE-SET,Telegram,åœ°åŒºé€‰æ‹©,no-resolve
- RULE-SET,Spotify,æ—¥æœ¬,no-resolve
- RULE-SET,Bilibili,DIRECT
- RULE-SET,China,DIRECT
- RULE-SET,ChinaIP,DIRECT
- MATCH,åœ°åŒºé€‰æ‹©
